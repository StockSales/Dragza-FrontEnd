"use client";

import { useEffect } from "react";
import { useRouter } from "@/i18n/routing";
import { getRoleFromToken, roleRoutes, defaultRouteByRole } from "@/lib/roleRoutes";

const RoleGuard = () => {
    const router = useRouter();
    const pathname = 

    useEffect(() => {
        const role = getRoleFromToken();
        const allowedRoutes = roleRoutes[role || ""] || [];

        if (!allowedRoutes.includes("*") && !allowedRoutes.includes(router.pathname)) {
            router.push(defaultRouteByRole[role || ""]);
        }
    }, [router.pathname]);

    return null;
};

export default RoleGuard;
